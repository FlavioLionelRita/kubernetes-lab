

# ECR
https://us-east-2.console.aws.amazon.com/ecr/repositories?region=us-east-2

registry: 828839038281.dkr.ecr.us-east-2.amazonaws.com
user: AWS
//el password es temporal , luego hay que volver a crearlo con aws ecr get-login-password --region us-east-2
password:  eyJwYXlsb2FkIjoiNmJJK3llenI1RWFWRW90MFVmOWkxUkJQT3UvYWdSbHVoRjhpNi9wK3JOSFVrbkZ4cERaUEo0M2FwQ05lYStrV3NDR2FBbUF4ZUZLaXBKaGx2MEl0Q0FvN3d2eTNMRGxJNnVKNXRWdllyNnU2UlYyMzlpOWM4UjhuOE9SK0x2SUhBRUM4M01YYTd3ZEV1UlFpbVhFSlB0Uk05cENTVjFpY1dkQ0RxNHZEQ3F4T0h3dm5mekRhR29sQmpxd0lrbWRmdC85QWI2RThVSkt3U1RJWUVkZ0YvRmVvcWxMb0RUV0NYNXBrQzRMcmIyeGk1Tk1uNVZ2aEhDVU5FMXlzMDNCemNERzhqYy93Q1JJQnlXOVNsRnNsVC9CTE4rY2JZRFFwSEpBaXpCWkREajhyK3N6dGpLUUxheEpZOTR1Y0EzRFdGcWhyMWZ2dkpZV04zV2Qvd2lucFpheEpRSmhkUTFRcHB4SjU1QW9lNVFIbitkS3JGbDNGQmxCVEFZOFlRSW1jcWdWUnRYRWUwdkd0TFMvUWZUTUMvZjJTQVFlSzJjc3Y5NUtvaU1uNnBMTXIrbGUvSUd0MHE3UVNKT1JyYndmWlVUQWM0YzJJMHVrc29hbERyZ1NUbzBkc2VoVmpnMytnV2FoVXRyTHJTaFc2RGVNTUFMUDZYL0pGK2Y4ekhRRW1jOXhSTG5yZWY1MVpsTmJ5aW5tZklxeHdZc3R2WHMzVVhvcnNFbHJhVGtyNExKTldCN2dwbE00c1MxUEpBY0xqL0lUT1k4a1lyZnU0ZkZEd25EWXlsR2VHN056Tjh6UDd1d2Z5dHZ2eDhwMno1czBnamdOekRQemZaMDV4Y2JZQytIa29CcUlFczhHTEFWbEpjL1B1RGJEQWVWVXVWUXoxZzJBL0xkdUhmNEUvMXdBbGNoVU8zbzRVMWgwY1VhTlFjc2JESUNFK3VrWTBnVDJOSzBMSTFuTlcyc2w5YUdCZEg4VEF4Z01HWmsvSkhQK2lHbGhZVXMvZmc5cmRYakNKV2RDZFE0QmUrdHl2b2d4RFJwZFd2TnlUQjZucXAzdDN4VkREdXRxSlV4cVFFUWljSjhFUEpvb3RhNk5odGloRXRtUHMxMm1DZUs2YlhwUUNEV2t3ZjZDUmNnVXJnOFpEWVExeGZRcHBoOWI1aTZxVzhjdHBQUklsM29PMjlMZ29MVmNCMlVFWEdTQ3ozVXd4bkI4akRsMDZJSy9OUnhBQjNhT01ka1R4Zm5HbnVFajhKemZabUZVMHNKRkZQWU9LSjUzSkxZditnZ2JydTlMcFlveFZOWFNrTUROc0RUelJtemY4UmNTem9rSEpIYjFxRUVMWTZDai90ZS9ENmUydjIzUG9HYWh5bEtSQXZ4VEpYSEh4UVNmaktweFRQNDd2RVd2dzFQS05OTmJZM1VFZ3MrK3AxbVMyL05ZVVQwUzY1cXZzUkxyTStrdmVPWGhXeU1MV0JPKy9XUG95azBwUWJlaHR2aTFDUEdHSDAyTEQrNW05MDlPb2IxdHpiVWlFK2dTc0lRRWVWZ1JBZ0E9PSIsImRhdGFrZXkiOiJBUUVCQUhqQjcvaWd3TWc0TlB3YXVyeFNJWXg0SGZueHVHYy80OGJEd3Z3RHBOWVdaZ0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVESk9tdW5GSHloREpibmlWbXdJQkVJQTdoSHNNQ2lUMzdvVVRXazFiSktDSzRTVzVQajZIcGlzb2lya0FMRHM4dEtBcHJXVFhrdlduenlqZ0M5L2pUbjQ2QUhzOUUzTmdPdi80L01nPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTU5NDg0MzQ5MX0=

# docker login

aws ecr get-login --registry-ids 828839038281

//en un paso obtiene el password y luego se loguea
aws ecr get-login-password --region us-east-2 | docker login --username AWS --password-stdin 828839038281.dkr.ecr.us-east-2.amazonaws.com


docker login -u AWS -p eyJwYXlsb2FkIjoid1ZIeFVFS1JzbXR2aU9hMUVCZk5MN0pQemoxaXp0dVpRMGhINDVvMXZCREJUZEJtQWtPakozRWJmT0VqRFJFdENWcWhQUEJkdk9hVkhyOEc2dnV1NDBKemtpc2poTGc1VThvT0lWTHVua0x6MlJWSFFYYS9lV3VPeTF1K0JmYVQyT1V4ZlgxNEdDOS96bDNiNmNDUEw2Z1RRaitZaEhpZXNWSldnUHR1SE41Wjgyby8ydkEySjJLeVNFTHprRHF3b1FTRE9LZzJoalFKUTFNTDFzNXBmZTNwZ3VKa2g0OXg2VmJCQTcwbURlVU44bjBMNWw2UDkrNndROWs2TlhERFVpN1BqREkxY2NuQ3FzVksydnlmTU9Ybm10WS9QeFdSeHF2LzNseGFxVVBCSU0rbi90ZHhIZVdINFlBbkRxUlU2Q3BxRUgyeDFKc25aNklsYklMT052dm5XUlV1TEhkbUJhUitSZVFDNHB4YjBBUXdNRExWUUNCdWM2MDFsWGVUVHZtUWFiRGNkSEtoYWZIaVRyMFJUYXArVG5kZ0ZPK0pwODE1UUV6TlVaQ0JtQlBXZnIzZ1BFT2JSUGxDSkxRYnZpdFRHVnd6RmZkUzNwb2FuNnJmTXdJRU5qNUlPaWxkMjZEQlc3YlRxUTBZaFpLU1VZbTVtRU9UWmxlbFUzU2M4bW0ySkhZYlpMMnpjV1I5eTB2TmFWeEZ3QlkrY1VqRzczWUpXOVovcTBkbFlmUEJOTThXVmtteFRhenFPa1hBa3FheUd4aDRFaHdMb0w1ZDFndDNrZzFhb1BpUnNCdlI4aXl3OU5mQlBSdzEzbmJLZ0xxMnJHSVlrQmZETkJ4S3ptQStZdzlLa1lvSG9wSGNsOTZtVDRVdFRqS2N1UVFYcVdOT2Y3bms5TzdseVYwbmNZZ2N4N3dSQW1VaTZNWFJ1cmFlYzJ5dndYY2l4Rmc0RUxVQXVEaHdqQ3d4KzNaRllNVzNnWENRL2lDazRJWGFMWjl3cVo2ejFGOGVWWS9WUi9ZL0l1VkdyY3RvSXV6a0lFUFI4UnkwamJQUklyQ2NWUENuVkc2ZDNkK0JJK0MxOGovT1piVmFBdmQ0M0M4VUUrM3JSSGlZNjhjUE5ZT0tyUTQzYzg5bE9Jai85VStHdnBqd2ovZUJyV0o2U0ZtMllZUHpTaTZWNFgvUHFXTmg3L3RKaUt6MEhOdDBlaS9Ldlk5dndJTWhGZHc1aTVtYTFRYnpXNys1UUxHWFNaa0RPWUJVV0lEcHVFZm5HL3dtSmlVUVhYaVoxaGsrSUdmNm9ubWM0a3lrOWhpZS9RWU5GVUdRei9QYjRESmlVbXFueVpxcnBCZFdJRkNiR1RwSGpkRlFJWlBFUkJ2dGkzdE1BdG5IMUJsbzd4OWlWWkVBZXUvZFVkcTNPZVd5TG1ubDhZYXh5ODZNdkd2SWdLQ2l4OEZGSUJLYU5zMjFNQmdlNVNCaE1jODZRNFk5cTM2VGxpcUIyOVNxeVZXcWxZVkdKaWFzSUhrK09VV0lWUFNLQ2hiOG44OC9WK3B3cFp3bUVUY0h3TEdXZFVqcktBPT0iLCJkYXRha2V5IjoiQVFFQkFIakI3L2lnd01nNE5Qd2F1cnhTSVl4NEhmbnh1R2MvNDhiRHd2d0RwTllXWmdBQUFINHdmQVlKS29aSWh2Y05BUWNHb0c4d2JRSUJBREJvQmdrcWhraUc5dzBCQndFd0hnWUpZSVpJQVdVREJBRXVNQkVFRElsL2FTVnpQNWZNcFBTOElnSUJFSUE3SkRNbWFzR1VUSHhPdi9kcHFHRmZtSkdna0VlNlMrM0FyUDhUSjVuMm5kb1ZTQ0MwRSttL2hGbGVTM0ZuQy85Y1JNSUFpaTNQZDlrdGRPdz0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE1OTUzMDIxNTR9 828839038281.dkr.ecr.us-east-2.amazonaws.com


# generate kubeconfig
https://docs.aws.amazon.com/es_es/eks/latest/userguide/create-kubeconfig.html
 
 aws eks --region us-east-2 update-kubeconfig --name blazedcloud-dev-cluster

# create image pull secert

kubectl create secret docker-registry aws-registry-secret --docker-server=828839038281.dkr.ecr.us-east-2.amazonaws.com  --docker-username=AWS  --docker-password=eyJwYXlsb2FkIjoiVm90M2JhSjZrS0t4SUdvUkllWE5weXc4a1NmdUZHSWJ2VUFtc1ZlWTI2cEUyUStxUW15M3czVXhWdlVvRmY0QlJYb3NYYm0yb1JyZERKcldOT2NXL1M5bjhzRWNocGl1THpkaUUwYnUyeHA3MjVSS05YN2xXRE9LZ0lNaGpCcUNtL2E1VHlOS3ZFTklrOTlZd2xoSmhITm9oMHJHNlhxQ0lGajlqczVUZ2lHSXZ3dVB5VCt6OC9pTUhlWmZtazN1VUl1L1ErWVJRVVJmQms3QU93eXB4ME5JZGhUdjNqZm5JcWdaRHorUEp5RytCQXJPdnNaMmR5eXJUMThPekZMd3J2NG11MXg1U0xJYVhsTkRsTTlGekZ5MmN0enUyQXdLWnpzQjViZlkzRmpZWmlBQkFzZm40ZSsyY0ZYOVpHTTJ4OXpsMUsyT1hkWCsvb2g4c3lENnhNNWp3Z2xIVUdIWlVrNGFDekV0M09XRllqT002Q2tjVGdFc2R3bTBoRDg5aUdBdVZrUDVSZFdPeGtYdTFDNXlvQ0NmU2MzYVRLaHpxUGt1TkdMVEh3WkJVTVU2OVlmSG12NWNJNmlOdlJEYTNPWDVFZ3dwNndVclUxRUw4ZkxRdTViR3RkK25MU3ZjMW9Cejc4cE9oQWM2MVhRa20yM096MmFucCtSVTNtMEhETEhQNnhsNEZQclY2UWQxbzkzTHhXc1hVKzV1dXlrcXF0Szd2ajd2amZQajdTMEswc3M3WERNOXFOVStwYmxDSmJmS0VVbm1vRThMVm5UUTRHcU95MUd6cUVQbkdsUWM2cWZJNHE1VjRuVC9hSTl2N1dhVk56VFI1Y0FIUzhXS2l4NTBzZ0IrSllyaEpGc3FtWGs5dWkvMUZvZzhpckF4Ym9SdUNkNG9YRG1FakRvWTRTM3dUWUxxMjhyWlNnODAvVCt6YXorQklwd2tja09wTHdXcEZjZEtWSS81TzNENndESGVPSUNiNTJnRXZLalNVU0tQQnduSzBvajFsSGJTdmUxK2J2dkVWaHUrZW41WUxzNjBtRHNzRnJIbU9aL3JDYVhJUjcyN2VrZC9Nb2MvYWNhbm8xRFRTZzF6MksrU0tmN2xpeVJOY2ZaMzQ0ZXlpREd0T2RpZFI5aXJ0ZVZacFUyaWlJazdocVhZa1p5dkxYV0kwVkpGN2ZXVG4rTUJYR0lrYzlPWXVEUmp3VWxUVnkrdTlZZFlINnVNdHZQUnltcWV1RDh3U08xQVpmTnJvNWtBbUJiNzZaMGUzcWFydmErNlJkOXdyZzN0amFwSXF5cWhQV2l3OU8wUG4zdG1oSTNmREppZjZRS0ZOMFpaSzRUanJObzBPSmpLdmpuZlV6dDY5SndWb1BoR2pMNWx1ZHlCTVNVNWJvKzZLcUxjMXh4QlRKZm0wQXBVZEdxNHhSUk01enpEQ0hSUWM3b1FiZmxsZmx5TVAvQ3VJNUc5UzhRQ3dXS01QZDNSd201MjAzaERuRENPMUcxc0YrSzRTWmFPYWpnWTN5bk5OOEYzUlZHcTlxOGVzNy9WZ2pTV213ZHphRFNCOG1mWjdBPT0iLCJkYXRha2V5IjoiQVFFQkFIakI3L2lnd01nNE5Qd2F1cnhTSVl4NEhmbnh1R2MvNDhiRHd2d0RwTllXWmdBQUFINHdmQVlKS29aSWh2Y05BUWNHb0c4d2JRSUJBREJvQmdrcWhraUc5dzBCQndFd0hnWUpZSVpJQVdVREJBRXVNQkVFREoxejE3Y1RzS3hlUG9nMVFBSUJFSUE3eHArODluUERMSUY2N0dSN2d1cjJtbHNDbTlLK0FsTjJwU3R6Sk1WUENyTjNsZEY5czRtK2pkRVMzdUErbFlPeDYxOVErYi9sNXgrSGljUT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE1OTUzMDQzMTV9 828839038281.dkr.ecr.us-east-2.amazonaws.com --docker-email=frita@beesion.com

//si ya existe se puede eliminar con 
kubectl delete secret aws-registry-secret
//para obtener el yaml
kubectl get secret aws-registry-secret -o yaml